<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Paint App</title>
    <link rel="icon" href="sources/wowow.png" type="image/png">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400&display=swap">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 100vh; background-color: #000; font-family: 'Poppins', sans-serif;
            opacity: 0; transition: opacity 1s ease; overflow: hidden;
        }
        canvas { border: none; width: 100vw; height: 100vh; touch-action: none; background-color: #000; position: absolute; top: 0; left: 0; }
        .controls { position: absolute; top: 10px; left: 10px; z-index: 10; color: white; }
        .go-back { position: absolute; top: 10px; right: 10px; z-index: 10; background-color: #fff; color: #000; border: none; border-radius: 5px; padding: 10px 15px; cursor: pointer; font-size: 16px; }
        .go-back:hover { background-color: #fff; color: #000; }
    </style>
</head>
<body>
<div class="controls">
    <label for="penColor">Pen Color:</label>
    <input type="color" id="penColor" value="#ffffff">
    <label for="bgColor">Background Color:</label>
    <input type="color" id="bgColor" value="#000000">
</div>
<canvas id="drawingCanvas"></canvas>
<button class="go-back" id="goBackButton">Go Back üè†</button>

<script>
    const canvas = document.getElementById('drawingCanvas');
    const ctx = canvas.getContext('2d');
    const penColorInput = document.getElementById('penColor');
    const bgColorInput = document.getElementById('bgColor');
    const goBackButton = document.getElementById('goBackButton');
    
    let drawing = false, paths = [], undonePaths = [], lastX, lastY;

    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        ctx.fillStyle = bgColorInput.value;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        redraw();
    }

    function startDrawing(e) {
        drawing = true; lastX = e.clientX; lastY = e.clientY;
        const path = { color: penColorInput.value, points: [{ x: lastX, y: lastY }] };
        paths.push(path); undonePaths = [];
        ctx.beginPath(); ctx.moveTo(lastX, lastY);
    }

    function draw(e) {
        if (!drawing) return;
        const currentPath = paths[paths.length - 1];
        ctx.strokeStyle = currentPath.color; ctx.lineWidth = 5; ctx.lineCap = 'round';
        ctx.quadraticCurveTo(lastX, lastY, (lastX + e.clientX) / 2, (lastY + e.clientY) / 2);
        ctx.stroke(); currentPath.points.push({ x: e.clientX, y: e.clientY });
        lastX = e.clientX; lastY = e.clientY;
    }

    function stopDrawing() { drawing = false; ctx.closePath(); }

    function redraw() {
        ctx.fillStyle = bgColorInput.value; ctx.fillRect(0, 0, canvas.width, canvas.height);
        paths.forEach(path => {
            ctx.strokeStyle = path.color;
            ctx.beginPath(); ctx.moveTo(path.points[0].x, path.points[0].y);
            path.points.forEach((point, index) => { if (index !== 0) ctx.lineTo(point.x, point.y); });
            ctx.stroke();
        });
    }

    function undo() { if (paths.length) { undonePaths.push(paths.pop()); redraw(); } }

    function redo() { if (undonePaths.length) { paths.push(undonePaths.pop()); redraw(); } }

    window.onload = function() { document.body.style.opacity = 1; resizeCanvas(); };
    canvas.addEventListener('mousedown', startDrawing);
    canvas.addEventListener('mousemove', draw);
    canvas.addEventListener('mouseup', stopDrawing);
    bgColorInput.addEventListener('input', () => { ctx.fillStyle = bgColorInput.value; ctx.fillRect(0, 0, canvas.width, canvas.height); redraw(); });
    goBackButton.addEventListener('click', () => { window.location.href = 'index.html'; });
    window.addEventListener('resize', resizeCanvas);
    window.addEventListener('keydown', (e) => { if (e.ctrlKey && e.key === 'z') { e.preventDefault(); undo(); } else if (e.ctrlKey && e.key === 'y') { e.preventDefault(); redo(); } });
</script>
</body>
</html>
